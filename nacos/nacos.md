# <CENTER> NACOS
<center><img src="nacos/2.png"/></img></center>

Nacos适用于微服务架构、云原生架构等现代应用架构场景。它可以帮助用户快速实现服务的注册、发现、配置管理和服务治理等功能，提高系统的可伸缩性、可扩展性和可维护性。兼容了Spring Cloud、Dubbo等大受欢迎的开源框架，还提供了丰富的插件化能力。

官网：https://nacos.io/
nacos架构与原理：https://nacos.io/docs/ebook/kbyo6n/
仓库：https://github.com/alibaba/nacos

nacos的特点：

- 动态服务发现
- 配置管理
- 服务管理：健康检查、服务治理、路由控制、安全策略等
- 
- 易于使用
- 高可用和可扩展性：

部署模式：
- 单机部署：单机，开发调试及测试使用
- 集群模式：
	- 一致性协议：一致性协议Distro以及Raft协议
	- 高可用、高扩展、高并发等优点，确保在故障发生时不影响业务的运行。

## 一致性协议
nacos支持一致性协议Distro以及Raft协议。用于实例元数据的一致性。其中Distro是阿里自研协议。
这里对Distro工作原理简要介绍

- 新节点加入：当有新的Nacos节点加入集群时，该节点会进行全量数据拉取（轮询集群中其他节点）。
- 组件注册：
- 异步复制：当接收到写请求，该节点会异步地将新数据同步到其他Nacos节点。
- 心跳与校验：各节点之间会定期发送心跳信息，包含节点上的元数据信息。
	- 并根据元数据信息进行一致性校验
	- 如果数据不一致，会全量拉取请求。
- 写请求处理
	- 处理请求或者转发到目标节点（非目标节点的情况）
	- 更新本地缓存中的数据
	- 异步地将变更同步到其他节点
- 读请求处理
	- 每个Nacos节点都可以独立处理并从本地缓存中返回数据
	- 所有节点都维护了全量数据，因此读操作无需跨节点查询
- 容错与恢复
	- 容错：Distro协议通过心跳和数据校验机制确保了数据的最终一致性。
	- 当网络恢复或故障节点重新加入集群时，各节点会进行数据的**合并和恢复操作**，以确保整个集群的数据一致性。



## nacos与springcloud集成
参见：[springboot集成nacos](https://void-x1.github.io/nacos/springboot集成nacos)

